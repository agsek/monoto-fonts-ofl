var mnt=mnt||{};mnt.init=function(){var t=this;t.settingsSection.init(),t.methods.init()},mnt.consts={outputTagForStyles:"body",boldElements:[".hljs-keyword",".hljs-attribute",".hljs-selector-tag",".hljs-meta-keyword",".hljs-doctag",".hljs-name",".hljs-title",".hljs-section","strong","b"],otFeaturesDefault:["calt","ccmp","clig","curs","kern","liga","locl","mark","mkmk","rclt","rlig"],otFeaturesShowable:["afrc","c2pc","c2sc","calt","case","ccmp","clig","cpsp","cswh","curs","dlig","dnom","expt","falt","frac","fwid","halt","hist","hlig","hngl","hojo","hwid","ital","jalt","jp04","jp78","jp83","jp90","kern","liga","lnum","locl","mark","mgrk","mkmk","nalt","nlck","numr","onum","ordn","ornm","palt","pcap","pkna","pnum","pwid","qwid","rand","rclt","rlig","ruby","rvrn","salt","sinf","smcp","smpl","subs","sups","swsh","titl","tnam","tnum","trad","twid","unic","vhal","vpal","zero","ss01","ss02","ss03","ss04","ss05","ss06","ss07","ss08","ss09","ss10","ss11","ss12","ss13","ss14","ss15","ss16","ss17","ss18","ss19","ss20"],documentParts:["header","body"],cssVars:{ffs:"--font-feature-settings",fvs:"--font-variation-settings",fvsb:"--font-variation-settings-bold",fontFamily:"--font-family"}},mnt.fonts={},mnt.elements={jsCustomStylesheet:document.getElementById("jsCustomStylesheet").sheet},mnt.helpers={isPropertySupported:function(t){return t in document.body.style},getFontVariationBold:function(t,e){return mnt.fonts[e].bold?t.replace(/^(.*?"wght" )([\d.]*)(.*)$/,"$1"+mnt.fonts[e].bold+"$3"):null},setCssRule:function(t,e,n){return t+" { "+e+": "+n+"; }"},buildFontCssSettings:function(t,e){var n,s,o,a=mnt.fonts,i=[];if("feature"===e){var r=a[t].feature;for(n in r)r.hasOwnProperty(n)&&i.push('"'+n+'" '+r[n]);return i}if("variation"===e){var l=a[t].variation;for(s in l)l.hasOwnProperty(s)&&(o=l[s].value||l[s].default,i.push('"'+s+'" '+o),"wght"===s&&(a[t].bold=mnt.helpers.setWghtAxisBoldValue(o,l[s].max)));return i}},setWghtAxisBoldValue:function(t,e){return parseInt(t)+.6*(e-t)}},mnt.methods={init:function(){var t=this,e=["./fonts/Monoto-VF.woff","./fonts/VotoSerifGX.woff"];t.incompatibilityInform();for(var n=0;n<e.length;n++)t.getFontObject(e[n]).then(function(t){mnt.methods.updateFontsObject(t)}).catch(function(t){console.error("Augh, there was an error!",t)})},incompatibilityInform:function(){mnt.helpers.isPropertySupported("fontVariationSettings")||(alert("Whoa, hold your horses Dude! Your browser doesn't support core fuctionality: font-variation-settings! \nSwitch to Webkit Nightly browser to check out this cool cutting-edge feature! \n** At least you can still play with settings sliders ;) **"),console.log("Whoa, hold your horses Dude! Your browser doesn't support core fuctionality: font-variation-settings! \nSwitch to Webkit Nightly browser to check out this cool cutting-edge feature! \n** At least you can still play with settings sliders ;) **"))},toggleClass:function(t,e,n){n=n||t,document.querySelector(t).addEventListener("click",function(){document.querySelector(n).classList.toggle(e)})},updateOutputTag:function(t){var e,n=t.parentNode.children,s=t.offsetWidth-10,o=(t.value-t.getAttribute("min"))/(t.getAttribute("max")-t.getAttribute("min")),a=1.3;if(o<0)o=0;else if(o>1)o=s;else{var i=o;o=s*o+a,a-=i}for(var r=0;r<n.length;r++)"output"===n[r].tagName.toLowerCase()&&(mnt.fonts[t.dataset.fontName].variation[t.name].value=t.value,e=n[r],e.value=t.value,e.style.left=o+"px",e.style.marginLeft=a+"%")},updateFontFeatureSettings:function(t){mnt.fonts[t.dataset.fontName].feature[t.name]=t.checked?1:0},buildInputs:function(t,e,n,s){var o,a,i,r,l=n+"-settings",d=document.getElementById(l),u=document.createDocumentFragment();if("object"==typeof e){if(d||(d=document.createElement("ul"),d.id=l,d.classList.add("font-settings"),s&&d.classList.add("selected"),document.getElementById("settingsSection").appendChild(d)),"feature"===t){var c=document.createElement("fieldset");c.classList.add("checkboxes");for(i in e)e.hasOwnProperty(i)&&(o=document.createElement("input"),a=document.createElement("label"),o.type="checkbox",o.checked=e[i],o.name=i,o.setAttribute("data-font-name",n),a.innerText=i,u.appendChild(a).appendChild(o),mnt.methods.addFeatureCheckboxListener(o));return void d.appendChild(c).appendChild(u)}if("variation"===t)for(r in e)if(e.hasOwnProperty(r)){var m=document.createElement("li"),h=document.createElement("output");o=document.createElement("input"),a=document.createElement("label"),m.classList.add("input-set","range"),h.classList.add("range-value"),h.value=e[r].default,o.classList.add("range-input"),o.id=n+"-"+r,o.setAttribute("data-font-name",n),o.name=r,o.type="range",o.min=e[r].min,o.max=e[r].max,o.value=e[r].default,a.classList.add("range-label"),a.htmlFor=n+r,a.innerText=r,u.appendChild(h),u.appendChild(o),u.appendChild(a),d.appendChild(m).appendChild(u),mnt.methods.addAxisSliderListener(o),mnt.methods.updateOutputTag(o)}}},addAxisSliderListener:function(t){t.addEventListener("input",function(){mnt.methods.updateOutputTag(t),mnt.methods.setFontSettingsStyles(t.dataset.fontName)},!1)},addFeatureCheckboxListener:function(t){t.addEventListener("change",function(){mnt.methods.updateFontFeatureSettings(t),mnt.methods.setFontSettingsStyles(t.dataset.fontName)},!1)},addFontNameRadioListener:function(t){t.addEventListener("change",function(){var t=document.getElementById(this.id+"-settings");document.querySelector(".font-settings.selected").classList.remove("selected"),t.classList.add("selected");for(var e=0;e<t.childNodes.length;e++)for(var n=t.childNodes[e],s=0;s<n.childNodes.length;s++){var o=n.childNodes[s];"INPUT"===o.tagName&&(mnt.methods.updateOutputTag(o),mnt.methods.setFontSettingsStyles(o.dataset.fontName))}},!1)},insertCssRule:function(t){var e=t.stylesheet||mnt.elements.jsCustomStylesheet,n=t.selector||":root",s=t.value||"",o=t.property,a=!1;if(!e.cssRules.length)return void e.insertRule(mnt.helpers.setCssRule(n,o,s),e.cssRules.length);for(var i=0;i<e.cssRules.length;i++)e.cssRules[i].selectorText===n&&e.cssRules[i].style[0]===o&&(e.cssRules[i].style.cssText=o+": "+s,a=!0);a||e.insertRule(mnt.helpers.setCssRule(n,o,s),e.cssRules.length)},setFontSettingsStyles:function(t){var e=mnt.helpers.buildFontCssSettings(t,"feature").join(", "),n=mnt.helpers.buildFontCssSettings(t,"variation").join(", "),s=mnt.helpers.getFontVariationBold(n,t);mnt.methods.insertCssRule({property:mnt.consts.cssVars.ffs,value:e}),mnt.methods.insertCssRule({property:mnt.consts.cssVars.fvs,value:n}),s&&mnt.methods.insertCssRule({property:mnt.consts.cssVars.fvsb,value:s}),mnt.methods.insertCssRule({property:mnt.consts.cssVars.fontFamily,value:t})},getFontObject:function(t){return new Promise(function(e,n){var s=new XMLHttpRequest;s.open("GET",t),s.responseType="arraybuffer",s.onload=function(){if(4===this.readyState&&200===this.status){var t,o=this.response,a=new Buffer(o),i=document.createElement("link");t=fontkit.create(a),i.rel="stylesheet",i.type="application/font-woff",i.href=this.responseURL,document.getElementsByTagName("head")[0].appendChild(i),e(t)}else n(Error(s.statusText))},s.onerror=function(t){n(Error("Network Error"))},s.send()})},updateFontsObject:function(t){var e,n=t.availableFeatures,s={},o=t["OS/2"];if(e=o?(o.typoAscender-o.typoDescender+o.typoLineGap)/t.head.unitsPerEm:(t.hhea.ascent-t.hhea.descent+t.hhea.lineGap)/t.head.unitsPerEm,n)for(var a=0;a<n.length;a++){var i=n[a],r=mnt.consts.otFeaturesShowable.indexOf(i)>-1,l=mnt.consts.otFeaturesDefault.indexOf(i)>-1;r&&(s[i]=l?1:0)}mnt.fonts[t.postscriptName]={"line-height":e||1.2,variation:t.variationAxes,feature:s},mnt.methods.buildSettingsSection(t.postscriptName)},buildSettingsSection:function(t){var e,n=document.getElementById("fontName"),s=document.createElement("input"),o=document.createElement("label"),a=document.createDocumentFragment(),i=mnt.fonts[t],r=!1;n||(n=document.createElement("fieldset"),n.id="fontName",document.getElementById("settingsSection").appendChild(n),r=!0),o.innerHTML=t,o.htmlFor=t,s.type="radio",s.id=t,s.name="font-name",s.value=t,s.innerHTML=t,s.checked=r,a.appendChild(s),a.appendChild(o),n.appendChild(a);for(e in i)i.hasOwnProperty(e)&&mnt.methods.buildInputs(e,i[e],t,r);mnt.methods.addFontNameRadioListener(s),r&&mnt.methods.setFontSettingsStyles(t)}},mnt.settingsSection={init:function(){mnt.methods.toggleClass("#settingsButton","open","#settingsWrapper"),mnt.methods.toggleClass("#settingsButton","open",".console-content")}},document.addEventListener("DOMContentLoaded",function(){mnt.init()});