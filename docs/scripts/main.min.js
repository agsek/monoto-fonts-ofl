var mnt=mnt||{};mnt.init=function(){var t=this;t.settingsSection.init(),t.methods.init()},mnt.consts={outputTagForStyles:"body",boldElements:[".hljs-keyword",".hljs-attribute",".hljs-selector-tag",".hljs-meta-keyword",".hljs-doctag",".hljs-name",".hljs-title",".hljs-section","strong","b"],fontVariationSettings:"font-variation-settings",fontFeatureSettings:"font-feature-settings",documentParts:["header","body"]},mnt.fonts={},adtFonts={"Monoto-VF.woff":{"line-height":1.19}},mnt.elements={jsCustomStylesheet:document.getElementById("jsCustomStylesheet").sheet,rangeInputs:document.getElementsByClassName("range-input")},mnt.helpers={isPropertySupported:function(t){return t in document.body.style},getFontVariationBold:function(t,e){return mnt.fonts[e].bold?t.replace(/^(.*?"wght" )([\d.]*)(.*)$/,"$1"+mnt.fonts[e].bold+"$3"):null},setCssRule:function(t,e,n){return t+" { "+e+": "+n+"; }"},buildFontVariationSettings:function(){var t,e=mnt.fonts,n=[];for(t in e)if(e.hasOwnProperty(t)){var s,o,i=e[t].variation;for(s in i)i.hasOwnProperty(s)&&(o=i[s].value||i[s].default,n.push('"'+s+'" '+o),"wght"===s&&(e[t].bold=mnt.helpers.setWghtAxisBoldValue(o,i[s].max)))}return n},setWghtAxisBoldValue:function(t,e){return parseInt(t)+.6*(e-t)}},mnt.methods={init:function(){var t=this;t.incompatibilityInform(),t.getFontObject(["./fonts/Monoto-VF.woff"],mnt.methods.updateFontsObject)},incompatibilityInform:function(){mnt.helpers.isPropertySupported("fontVariationSettings")||(alert("Whoa, hold your horses Dude! Your browser doesn't support core fuctionality: font-variation-settings! \nSwitch to Webkit Nightly browser to check out this cool cutting-edge feature! \n** At least you can still play with settings sliders ;) **"),console.log("Whoa, hold your horses Dude! Your browser doesn't support core fuctionality: font-variation-settings! \nSwitch to Webkit Nightly browser to check out this cool cutting-edge feature! \n** At least you can still play with settings sliders ;) **"))},toggleClass:function(t,e,n){n=n||t,document.querySelector(t).addEventListener("click",function(){document.querySelector(n).classList.toggle(e)})},updateOutputTag:function(t){var e,n=t.parentNode.children,s=t.offsetWidth-10,o=(t.value-t.getAttribute("min"))/(t.getAttribute("max")-t.getAttribute("min"));o=o<0||o>1?o<0?0:s:s*o;for(var i=0;i<n.length;i++)"output"===n[i].tagName.toLowerCase()&&(mnt.fonts[t.dataset.fontName].variation[t.name].value=t.value,e=n[i],e.value=t.value,e.style.left=o+"px")},buildInputs:function(t,e){var n,s=e+"-settings",o=document.getElementById(s);if("object"==typeof t){if(o||(o=document.createElement("ul"),o.id=s,document.getElementById("settingsSection").appendChild(o)),"[object Array]"===Object.prototype.toString.call(t))return void console.log("it's an array");for(n in t)if(t.hasOwnProperty(n)){var i=document.createElement("li"),a=document.createElement("input"),r=document.createElement("output"),l=document.createElement("label"),u=document.createDocumentFragment();i.classList.add("input-set","range"),r.classList.add("range-value"),r.value=t[n].default,a.classList.add("range-input"),a.id=e+"-"+n,a.setAttribute("data-font-name",e),a.name=n,a.type="range",a.min=t[n].min,a.max=t[n].max,a.value=t[n].default,l.classList.add("range-label"),l.htmlFor=e+n,l.innerText=n,u.appendChild(r),u.appendChild(a),u.appendChild(l),o.appendChild(i).appendChild(u),mnt.methods.updateOutputTag(a)}}},inputsValueListener:function(){Array.prototype.forEach.call(mnt.elements.rangeInputs,function(t){t.addEventListener("input",function(){mnt.methods.updateOutputTag(this),mnt.methods.setFontSettingsStyles(this.dataset.fontName)},!1)})},setFontSettingsStyles:function(t){if(!t)throw new Error("Font name is empty");var e=mnt.helpers.buildFontVariationSettings().join(", "),n=mnt.elements.jsCustomStylesheet,s="--"+mnt.consts.fontVariationSettings,o="--"+mnt.consts.fontVariationSettings+"-bold",i=mnt.helpers.getFontVariationBold(e,t);if(!n.cssRules.length)return void function(){n.insertRule(mnt.helpers.setCssRule(":root",s,e),n.cssRules.length),n.insertRule(mnt.helpers.setCssRule(":root",o,i),n.cssRules.length)}();for(var a=0;a<n.cssRules.length;a++)":root"===n.cssRules[a].selectorText&&n.cssRules[a].style[0]===s&&(n.cssRules[a].style.cssText=s+": "+e),":root"===n.cssRules[a].selectorText&&n.cssRules[a].style[0]===o&&(n.cssRules[a].style.cssText=o+": "+(i||e))},getFontObject:function(t,e){for(var n,s=new XMLHttpRequest,o=0;o<t.length;o++)s.open("GET",t[o]),s.responseType="arraybuffer",s.onload=function(){if(4===s.readyState&&200===s.status){var t=this.response,o=new Buffer(t);n=fontkit.create(o),e.apply(this,[n])}},s.send()},updateFontsObject:function(t){var e,n=t["OS/2"];e=n?(n.typoAscender-n.typoDescender+n.typoLineGap)/t.head.unitsPerEm:(t.hhea.ascent-t.hhea.descent+t.hhea.lineGap)/t.head.unitsPerEm,mnt.fonts[t.postscriptName]={"line-height":e||1.2,variation:t.variationAxes,feature:t.availableFeatures},mnt.methods.setFontSettingsStyles(t.postscriptName),mnt.methods.buildSettingsSection(t.postscriptName),mnt.methods.inputsValueListener()},getFontFeatureSettings:function(t){for(var e={},n=0;n<t.length;n++){var s=t[n];e[s.axisTag]={defaultValue:s.defaultValue,minValue:s.minValue,maxValue:s.maxValue}}return e},buildSettingsSection:function(t){var e,n=document.getElementById("fontName"),s=document.createElement("input"),o=document.createElement("label"),i=mnt.fonts[t];n||(n=document.createElement("fieldset"),n.id="fontName",document.getElementById("settingsSection").appendChild(n)),o.innerHTML=t,o.htmlFor=t,s.type="radio",s.id=t,s.value=t,s.innerHTML=t,n.appendChild(s),n.appendChild(o);for(e in i)i.hasOwnProperty(e)&&mnt.methods.buildInputs(i[e],t)}},mnt.settingsSection={init:function(){mnt.methods.toggleClass("#settingsButton","open","#settingsWrapper"),mnt.methods.toggleClass("#settingsButton","open",".console-content")}},document.addEventListener("DOMContentLoaded",function(){mnt.init()});