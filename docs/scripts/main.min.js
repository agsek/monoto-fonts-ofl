var mnt=mnt||{};mnt.init=function(){this.methods.init()},mnt.consts={outputTagForStyles:"body",boldElements:[".hljs-keyword",".hljs-attribute",".hljs-selector-tag",".hljs-meta-keyword",".hljs-doctag",".hljs-name",".hljs-title",".hljs-section","strong","b"],otFeaturesDefault:["calt","ccmp","clig","curs","kern","liga","locl","mark","mkmk","rclt","rlig"],otFeaturesShowable:["afrc","c2pc","c2sc","calt","case","ccmp","clig","cpsp","cswh","curs","dlig","dnom","expt","falt","frac","fwid","halt","hist","hlig","hngl","hojo","hwid","ital","jalt","jp04","jp78","jp83","jp90","kern","liga","lnum","locl","mark","mgrk","mkmk","nalt","nlck","numr","onum","ordn","ornm","palt","pcap","pkna","pnum","pwid","qwid","rand","rclt","rlig","ruby","rvrn","salt","sinf","smcp","smpl","subs","sups","swsh","titl","tnam","tnum","trad","twid","unic","vhal","vpal","zero","ss01","ss02","ss03","ss04","ss05","ss06","ss07","ss08","ss09","ss10","ss11","ss12","ss13","ss14","ss15","ss16","ss17","ss18","ss19","ss20"],documentParts:["header","body"],cssVars:{ffs:"--font-feature-settings",fvs:"--font-variation-settings",fvsb:"--font-variation-settings-bold",fontFamily:"--font-family"}},mnt.fonts={},mnt.elements={jsCustomStylesheet:document.getElementById("jsCustomStylesheet").sheet},mnt.helpers={isPropertySupported:function(t){return t in document.body.style},getFontVariationBold:function(t,e){return mnt.fonts[e].bold?t.replace(/^(.*?'wght' )([\d.]*)(.*)$/,"$1"+mnt.fonts[e].bold+"$3"):null},setCssRule:function(t,e,n){return t+" { "+e+": "+n+"; }"},buildFontCssSettings:function(t,e,n){var s,a,o,n=n||{},i=mnt.fonts,r=[];if("feature"===e){var l=i[t].feature;for(s in l)l.hasOwnProperty(s)&&(n.hasOwnProperty(s)?r.push("'"+s+"' "+n[s]):r.push("'"+s+"' "+l[s]));return r}if("variation"===e){var d=i[t].variation;for(a in d)d.hasOwnProperty(a)&&(o=n.hasOwnProperty(a)?n[a]:d[a].value||d[a].default,r.push("'"+a+"' "+o),"wght"===a&&(i[t].bold=mnt.helpers.setWghtAxisBoldValue(o,d[a].max)));return r}},setWghtAxisBoldValue:function(t,e){return parseInt(t)+.6*(e-t)}},mnt.methods={init:function(){var t=this,e=["./fonts/Monoto-VF.woff","./fonts/VotoSerifGX.woff"];t.incompatibilityInform();for(var n=0;n<e.length;n++)t.getFontObject(e[n]).then(function(t){mnt.methods.updateFontsObject(t),document.getElementsByTagName("body")[0].classList.remove("fonts-loading")}).catch(function(t){console.error("Augh, there was an error!",t)})},incompatibilityInform:function(){mnt.helpers.isPropertySupported("fontVariationSettings")||(alert('Whoa, hold your horses Dude! Your browser doesn\'t support core functionality: font-variation-settings! \nSwitch to Webkit Nightly / Safari Technology Preview / Chrome Canary* browser to check out this cool cutting-edge feature! \n\n* with "Experimental Web Platform features" flag enabled.'),console.error('Whoa, hold your horses Dude! Your browser doesn\'t support core functionality: font-variation-settings! \nSwitch to Webkit Nightly / Safari Technology Preview / Chrome Canary* browser to check out this cool cutting-edge feature! \n\n* with "Experimental Web Platform features" flag enabled.'))},updateOutputTag:function(t){var e,n=t.parentNode.children,s=t.offsetWidth-10,a=(t.value-t.getAttribute("min"))/(t.getAttribute("max")-t.getAttribute("min")),o=1.3;if(a<0)a=0;else if(a>1)a=s;else{var i=a;a=s*a+o,o-=i}for(var r=0;r<n.length;r++)"output"===n[r].tagName.toLowerCase()&&(mnt.fonts[t.dataset.fontName].variation[t.name].value=t.value,e=n[r],e.value=t.value,e.style.left=a+"px",e.style.marginLeft=o+"%")},updateFontFeatureSettings:function(t){mnt.fonts[t.dataset.fontName].feature[t.name]=t.checked?1:0},buildInputs:function(t,e,n,s){var a,o,i,r,l=n+"-settings",d=document.getElementById(l),m=document.createDocumentFragment();if("object"==typeof e){if(d||(d=document.createElement("ul"),d.id=l,d.classList.add("font-settings"),s&&d.classList.add("selected"),document.getElementById("settingsSection").appendChild(d)),"feature"===t){var u=document.createElement("fieldset");u.classList.add("checkboxes");for(i in e)e.hasOwnProperty(i)&&(a=document.createElement("input"),o=document.createElement("label"),a.type="checkbox",a.checked=e[i],a.name=i,a.setAttribute("data-font-name",n),o.innerText=i,m.appendChild(o).appendChild(a),mnt.methods.addFeatureCheckboxListener(a));return void d.appendChild(u).appendChild(m)}if("variation"===t)for(r in e)if(e.hasOwnProperty(r)){var c=document.createElement("li"),h=document.createElement("output");a=document.createElement("input"),o=document.createElement("label"),c.classList.add("input-set","range"),h.value=e[r].default,a.id=n+"-"+r,a.setAttribute("data-font-name",n),a.name=r,a.type="range",a.min=e[r].min,a.max=e[r].max,a.value=e[r].default,o.htmlFor=n+r,o.innerText=r,m.appendChild(h),m.appendChild(a),m.appendChild(o),d.appendChild(c).appendChild(m),mnt.methods.addAxisSliderListener(a),mnt.methods.updateOutputTag(a)}}},addAxisSliderListener:function(t){t.addEventListener("input",function(){mnt.methods.updateOutputTag(t),mnt.methods.setFontSettingsStyles(t.dataset.fontName)},!1)},addFeatureCheckboxListener:function(t){t.addEventListener("change",function(){mnt.methods.updateFontFeatureSettings(t),mnt.methods.setFontSettingsStyles(t.dataset.fontName)},!1)},addFontNameRadioListener:function(t){t.addEventListener("change",function(){var t=document.getElementById(this.id+"-settings");document.querySelector(".font-settings.selected").classList.remove("selected"),t.classList.add("selected");for(var e=0;e<t.childNodes.length;e++)for(var n=t.childNodes[e],s=0;s<n.childNodes.length;s++){var a=n.childNodes[s];"INPUT"===a.tagName&&(mnt.methods.updateOutputTag(a),mnt.methods.setFontSettingsStyles(a.dataset.fontName))}},!1)},insertCssRule:function(t){var e=t.stylesheet||mnt.elements.jsCustomStylesheet,n=t.selector||":root",s=t.value||"",a=t.property,o=!1;if(!e.cssRules.length)return void e.insertRule(mnt.helpers.setCssRule(n,a,s),e.cssRules.length);for(var i=0;i<e.cssRules.length;i++)e.cssRules[i].selectorText===n&&e.cssRules[i].style[0]===a&&(e.cssRules[i].style.cssText=a+": "+s,o=!0);o||e.insertRule(mnt.helpers.setCssRule(n,a,s),e.cssRules.length)},setFontSettingsStyles:function(t){var e=mnt.helpers.buildFontCssSettings(t,"feature").join(", "),n=mnt.helpers.buildFontCssSettings(t,"variation").join(", "),s=mnt.helpers.getFontVariationBold(n,t);mnt.methods.insertCssRule({property:mnt.consts.cssVars.ffs,value:e}),mnt.methods.insertCssRule({property:mnt.consts.cssVars.fvs,value:n}),s&&mnt.methods.insertCssRule({property:mnt.consts.cssVars.fvsb,value:s}),mnt.methods.insertCssRule({property:mnt.consts.cssVars.fontFamily,value:t})},getFontObject:function(t){return new Promise(function(e,n){var s=new XMLHttpRequest;s.open("GET",t),s.responseType="arraybuffer",s.onload=function(){if(4===this.readyState&&200===this.status){var t,a=this.response,o=new Buffer(a),i=document.createElement("link");t=fontkit.create(o),i.rel="stylesheet",i.type="application/font-woff",i.href=this.responseURL,document.getElementsByTagName("head")[0].appendChild(i),e(t)}else n(Error(s.statusText))},s.onerror=function(t){n(Error("An error occured: "+t.message))},s.send()})},updateFontsObject:function(t){var e,n=t.availableFeatures,s={},a=t["OS/2"];if(e=a?(a.typoAscender-a.typoDescender+a.typoLineGap)/t.head.unitsPerEm:(t.hhea.ascent-t.hhea.descent+t.hhea.lineGap)/t.head.unitsPerEm,n)for(var o=0;o<n.length;o++){var i=n[o],r=mnt.consts.otFeaturesShowable.indexOf(i)>-1,l=mnt.consts.otFeaturesDefault.indexOf(i)>-1;r&&(s[i]=l?1:0)}mnt.fonts[t.postscriptName]={"line-height":e||1.2,variation:t.variationAxes,feature:s},mnt.methods.buildSettingsSection(t.postscriptName)},buildSettingsSection:function(t){var e,n=document.getElementById("fontName"),s=document.createElement("input"),a=document.createElement("label"),o=document.createDocumentFragment(),i=mnt.fonts[t],r=!1;n||(n=document.createElement("fieldset"),n.id="fontName",document.getElementById("settingsSection").appendChild(n),r=!0),a.innerHTML=t,a.htmlFor=t,s.type="radio",s.id=t,s.name="font-name",s.value=t,s.innerHTML=t,s.checked=r,o.appendChild(s),o.appendChild(a),n.appendChild(o);for(e in i)i.hasOwnProperty(e)&&mnt.methods.buildInputs(e,i[e],t,r);mnt.methods.addFontNameRadioListener(s),r&&mnt.methods.setFontSettingsStyles(t)}},mnt.adjustElementWidth={getTitleInputInnerWidth:function(){mnt.adjustElementWidth.buildOptions(),mnt.adjustElementWidth.options.editableElement.removeEventListener("input",mnt.adjustElementWidth.listener),mnt.adjustElementWidth.options.editableElement.addEventListener("input",mnt.adjustElementWidth.listener)},options:{},buildOptions:function(){var t=mnt.adjustElementWidth.options;t.editableElement=document.getElementsByTagName("h1")[0],t.ghostSpan=document.createElement("span"),t.editableElementComputedStyles=window.getComputedStyle(t.editableElement,null),t.editableElementWidth=t.editableElement.clientWidth,t.ghostSpan.style.color="transparent",t.ghostSpan.style.top="-100vh",t.ghostSpan.innerText=t.editableElement.innerText,document.getElementsByTagName("footer")[0].appendChild(t.ghostSpan)},listener:function(){var t=mnt.adjustElementWidth.options,e=0,n=0;t.axisName="wdth",mnt.adjustElementWidth.setStyles(t),t.fontName&&mnt.fonts.hasOwnProperty(t.fontName)&&mnt.fonts[t.fontName].variation.hasOwnProperty(t.axisName)&&(t.axis=mnt.fonts[t.fontName].variation[t.axisName],t.currentAxisValue=mnt.adjustElementWidth.getCurrentAxisValue(t.axisName),t.ghostSpan.clientWidth>=t.editableElementWidth&&(e=t.axis.min,n=t.currentAxisValue),t.ghostSpan.clientWidth<t.editableElementWidth&&(e=t.currentAxisValue,n=t.axis.max),mnt.adjustElementWidth.binarySearch(e,n,t,0))},getCurrentAxisValue:function(t){var e=0;return mnt.adjustElementWidth.options.ghostSpan.style.fontVariationSettings.split(", ").forEach(function(n){for(var s=n.split(" "),a=0;a<s.length;a++)if(s[a]==="'"+t+"'")return void(e=parseInt(s[a+1]))}),e},setStyles:function(t){var e;if(!t.editableElementComputedStyles)return console.error("Couldn't compute styles of: "+t.editableElement),null;for(e in t.editableElementComputedStyles)t.editableElementComputedStyles.hasOwnProperty(e)&&mnt.adjustElementWidth.isStylePropertyValid(t.editableElementComputedStyles[e])&&(t.ghostSpan.style[e]=t.editableElementComputedStyles[e]);t.ghostSpan.innerText=t.editableElement.innerText,t.ghostSpan.style.position="absolute",t.ghostSpan.style.width="auto",t.ghostSpan.style.color="transparent",t.ghostSpan.style.top="-100vh",t.fontName=t.ghostSpan.style.fontFamily.split(", ")[0]},binarySearch:function(t,e,n,s){var a,o={};s>10||(s++,n.currentAxisValue=Math.floor((e-t)/2+t),o[n.axisName]=n.currentAxisValue,n.fvsValue=mnt.helpers.buildFontCssSettings(n.fontName,"variation",o).join(", "),n.editableElement.style.fontVariationSettings=n.fvsValue,n.ghostSpan.style.fontVariationSettings=n.fvsValue,(a=n.editableElementWidth-n.ghostSpan.clientWidth)<=.01*n.editableElementWidth&&a>0||t===e||(n.ghostSpan.clientWidth>=n.editableElementWidth&&(e=parseInt(n.currentAxisValue)),n.ghostSpan.clientWidth<n.editableElementWidth&&(t=parseInt(n.currentAxisValue)),mnt.adjustElementWidth.binarySearch(t,e,n,s)))},isStylePropertyValid:function(t){return void 0!==t&&"object"!=typeof t&&"function"!=typeof t&&t.length>0&&t!==parseInt(t)}},document.addEventListener("DOMContentLoaded",function(){mnt.init(),mnt.adjustElementWidth.getTitleInputInnerWidth()});